"use strict";(self.webpackChunkstock=self.webpackChunkstock||[]).push([[924],{9924:(F,p,s)=>{s.r(p),s.d(p,{InsiderSentimentModule:()=>Q});var m=s(6895),t=s(8256),l=s(5141),d=s(4128),u=s(4004),S=s(6590),g=s(1860);let f=(()=>{class n{constructor(e){this.finnhubService=e}getSentiment(e){const o=this.getDate(),a=this.getDate(1),h=this.getDate(2),c=this.getDate(3);return(0,d.D)({description:this.finnhubService.getDescription(e),sentiments:this.finnhubService.getSentiments(e,c,o)}).pipe((0,u.U)(r=>({symbol:e,description:r.description,currentMonthSentiment:this.getMonthSentiment(o,r.sentiments),oneMonthAgoSentiment:this.getMonthSentiment(a,r.sentiments),twoMonthsAgoSentiment:this.getMonthSentiment(h,r.sentiments)})),(0,S.d)(void 0))}getMonthSentiment(e,o){const a=o.find(c=>c.month===e.getMonth()&&c.year===e.getFullYear());return{monthDate:e,details:a?{change:a.change,mspr:a.mspr}:void 0}}getDate(e=0){const o=new Date;return o.setMonth(o.getMonth()-e),o}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.n))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=s(2569);function Z(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.AsE("Change: ",e.monthSentiment.details.change>0?"+":"","",e.monthSentiment.details.change," ")}}function x(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij("MSPR: ",t.xi3(3,1,e.monthSentiment.details.mspr,"1.0-2")," ")}}function v(n,i){1&n&&(t.TgZ(0,"tr",5)(1,"td"),t._uU(2,"No data available"),t.qZA()())}function D(n,i){if(1&n&&(t.TgZ(0,"td"),t._UZ(1,"app-trend",6),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("percentage",e.monthSentiment.details.change)}}let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-month-sentiment"]],inputs:{monthSentiment:"monthSentiment"},decls:13,vars:10,consts:[[1,"table"],[1,"col-md-6"],[1,"fw-bold"],[4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[3,"percentage"]],template:function(e,o){1&e&&(t.TgZ(0,"table",0)(1,"tr")(2,"td",1)(3,"table",0)(4,"tr")(5,"td",2),t._uU(6),t.ALo(7,"uppercase"),t.ALo(8,"date"),t.qZA()(),t.YNc(9,Z,3,2,"tr",3),t.YNc(10,x,4,4,"tr",3),t.YNc(11,v,3,0,"tr",4),t.qZA()(),t.YNc(12,D,2,1,"td",3),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(t.lcZ(7,5,t.xi3(8,7,o.monthSentiment.monthDate,"MMMM"))),t.xp6(3),t.Q6J("ngIf",o.monthSentiment.details),t.xp6(1),t.Q6J("ngIf",o.monthSentiment.details),t.xp6(1),t.Q6J("ngIf",!o.monthSentiment.details),t.xp6(1),t.Q6J("ngIf",o.monthSentiment.details))},dependencies:[m.O5,M._,m.gd,m.JJ,m.uU],encapsulation:2}),n})();var T=s(9676);function C(n,i){1&n&&(t.TgZ(0,"p",5),t._uU(1,"Loading sentiment details..."),t.qZA())}function I(n,i){if(1&n&&(t.TgZ(0,"p",6),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Stock not found: ",e.stockNotFound,"")}}function U(n,i){if(1&n&&(t.TgZ(0,"div",7)(1,"table",8)(2,"tr")(3,"td")(4,"h5"),t._uU(5),t.ALo(6,"stockTitle"),t.qZA()()(),t.TgZ(7,"tr",9)(8,"td",10),t._UZ(9,"app-month-sentiment",11),t.qZA(),t.TgZ(10,"td",10),t._UZ(11,"app-month-sentiment",11),t.qZA(),t.TgZ(12,"td",10),t._UZ(13,"app-month-sentiment",11),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,4,e.sentimentDetails)),t.xp6(4),t.Q6J("monthSentiment",e.sentimentDetails.twoMonthsAgoSentiment),t.xp6(2),t.Q6J("monthSentiment",e.sentimentDetails.oneMonthAgoSentiment),t.xp6(2),t.Q6J("monthSentiment",e.sentimentDetails.currentMonthSentiment)}}const J=function(){return["/"]};let y=(()=>{class n{constructor(e,o){this.route=e,this.sentimentService=o,this.stockNotFound=""}ngOnInit(){const e=this.route.snapshot.params.symbol.toUpperCase();this.sentimentService.getSentiment(e).subscribe(o=>{o?this.sentimentDetails=o:this.stockNotFound=e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:8,vars:5,consts:[["class","container fst-italic",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","container border",4,"ngIf"],[1,"container"],["id","backBtn",1,"btn","btn-outline-secondary",3,"routerLink"],[1,"container","fst-italic"],[1,"alert","alert-danger"],[1,"container","border"],[1,"table"],[1,"row"],[1,"col"],[3,"monthSentiment"]],template:function(e,o){1&e&&(t._UZ(0,"br"),t.YNc(1,C,2,0,"p",0),t.YNc(2,I,2,1,"p",1),t.YNc(3,U,14,6,"div",2),t._UZ(4,"br"),t.TgZ(5,"div",3)(6,"a",4),t._uU(7," < Back to list of stocks "),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",!o.sentimentDetails&&!o.stockNotFound),t.xp6(1),t.Q6J("ngIf",o.stockNotFound),t.xp6(1),t.Q6J("ngIf",o.sentimentDetails),t.xp6(3),t.Q6J("routerLink",t.DdM(4,J)))},dependencies:[m.O5,l.yS,A,T.r],encapsulation:2}),n})();var b=s(4466);const N=[{path:":symbol",component:y}];let Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.ez,b.m,l.Bz.forChild(N)]}),n})()}}]);