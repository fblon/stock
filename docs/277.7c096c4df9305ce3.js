"use strict";(self.webpackChunkstock_tracker=self.webpackChunkstock_tracker||[]).push([[277],{5277:(N,h,i)=>{i.r(h),i.d(h,{InsiderSentimentModule:()=>Y});var r=i(6895),t=i(8256),a=i(9708),S=i(2569);function f(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.AsE("Change: ",e.monthSentiment.details.change>0?"+":"","",e.monthSentiment.details.change," ")}}function g(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij("MSPR: ",t.xi3(3,1,e.monthSentiment.details.mspr,"1.0-2")," ")}}function v(n,s){1&n&&(t.TgZ(0,"tr",5)(1,"td"),t._uU(2,"No data available"),t.qZA()())}function M(n,s){if(1&n&&(t.TgZ(0,"td"),t._UZ(1,"app-trend",6),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("percentage",e.monthSentiment.details.change)}}let D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-month-sentiment"]],inputs:{monthSentiment:"monthSentiment"},decls:13,vars:10,consts:[[1,"table"],[1,"col-md-6"],[1,"fw-bold"],[4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[3,"percentage"]],template:function(e,o){1&e&&(t.TgZ(0,"table",0)(1,"tr")(2,"td",1)(3,"table",0)(4,"tr")(5,"td",2),t._uU(6),t.ALo(7,"uppercase"),t.ALo(8,"date"),t.qZA()(),t.YNc(9,f,3,2,"tr",3),t.YNc(10,g,4,4,"tr",3),t.YNc(11,v,3,0,"tr",4),t.qZA()(),t.YNc(12,M,2,1,"td",3),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(t.lcZ(7,5,t.xi3(8,7,o.monthSentiment.monthDate,"MMMM"))),t.xp6(3),t.Q6J("ngIf",o.monthSentiment.details),t.xp6(1),t.Q6J("ngIf",o.monthSentiment.details),t.xp6(1),t.Q6J("ngIf",!o.monthSentiment.details),t.xp6(1),t.Q6J("ngIf",o.monthSentiment.details))},dependencies:[r.O5,S._,r.gd,r.JJ,r.uU],encapsulation:2}),n})();var Z=i(9676);function x(n,s){if(1&n&&(t.TgZ(0,"div",3)(1,"table",4)(2,"tr")(3,"td")(4,"h5"),t._uU(5),t.ALo(6,"stockTitle"),t.qZA()()(),t.TgZ(7,"tr",5)(8,"td",6),t._UZ(9,"app-month-sentiment",7),t.qZA(),t.TgZ(10,"td",6),t._UZ(11,"app-month-sentiment",7),t.qZA(),t.TgZ(12,"td",6),t._UZ(13,"app-month-sentiment",7),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,4,e.sentimentDetails)),t.xp6(4),t.Q6J("monthSentiment",e.sentimentDetails.twoMonthsAgoSentiment),t.xp6(2),t.Q6J("monthSentiment",e.sentimentDetails.oneMonthAgoSentiment),t.xp6(2),t.Q6J("monthSentiment",e.sentimentDetails.currentMonthSentiment)}}const A=function(){return["/"]};let y=(()=>{class n{constructor(e){this.route=e,this.stockNotFound=""}ngOnInit(){this.sentimentDetails=this.route.snapshot.data.sentimentDetails}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:6,vars:3,consts:[["class","container border",4,"ngIf"],[1,"container"],["id","backBtn",1,"btn","btn-outline-secondary",3,"routerLink"],[1,"container","border"],[1,"table"],[1,"row"],[1,"col"],[3,"monthSentiment"]],template:function(e,o){1&e&&(t._UZ(0,"br"),t.YNc(1,x,14,6,"div",0),t._UZ(2,"br"),t.TgZ(3,"div",1)(4,"a",2),t._uU(5," < Back to list of stocks "),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.sentimentDetails),t.xp6(3),t.Q6J("routerLink",t.DdM(2,A)))},dependencies:[r.O5,a.yS,D,Z.r],encapsulation:2}),n})();var C=i(4466),T=i(8505),p=i(4004),I=i(4128),U=i(515),J=i(9646),d=i(262),F=i(6590),Q=i(7248);let b=(()=>{class n{constructor(e){this.finnhubService=e}getSentiment(e){const o=this.getDate(),m=this.getDate(1),u=this.getDate(2),c=this.getDate(3);return(0,I.D)({description:this.finnhubService.getDescription(e).pipe((0,d.K)(()=>U.E)),sentiments:this.finnhubService.getSentiments(e,c,o).pipe((0,d.K)(()=>(0,J.of)([])))}).pipe((0,p.U)(l=>({symbol:e,description:l.description,currentMonthSentiment:this.getMonthSentiment(o,l.sentiments),oneMonthAgoSentiment:this.getMonthSentiment(m,l.sentiments),twoMonthsAgoSentiment:this.getMonthSentiment(u,l.sentiments)})),(0,F.d)(void 0))}getMonthSentiment(e,o){const m=o.find(c=>c.month===e.getMonth()&&c.year===e.getFullYear());return{monthDate:e,details:m?{change:m.change,mspr:m.mspr}:void 0}}getDate(e=0){const o=new Date;return o.setMonth(o.getMonth()-e),o}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Q.n))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L=[{path:":symbol",component:y,resolve:{sentimentDetails:(()=>{class n{constructor(e,o){this.sentimentService=e,this.router=o}resolve(e){const o=e.params.symbol.toUpperCase();return this.sentimentService.getSentiment(o).pipe((0,T.b)(m=>{null==m&&this.router.navigate(["/404"])}),(0,p.U)(m=>m))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(b),t.LFG(a.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}];let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[r.ez,C.m,a.Bz.forChild(L)]}),n})()}}]);